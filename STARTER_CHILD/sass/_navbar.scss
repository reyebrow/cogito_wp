@import "settings";
.nav-bar {
  height: $navBarHeight; 
  background: lighten($black, 30%); 
  margin-left: 0; 
  margin-top: 0; 
  padding: 0;
  &>li { 
    float: $defaultFloat; 
    display: block; 
    position: relative; 
    padding: 0; 
    margin: 0; 
    line-height: $navBarHeight; 
    &:first-child { }
    &:last-child { }
    &.active { 
      background: $mainColor; 
      &>a { color: $white; cursor: default; }
      &:hover { background: $mainColor; cursor: default; }
    }
    &:hover { background: lighten($black, 20%); }
    &>a { color: darken($white, 10%); }
    ul { margin-bottom: 0; }
    .flyout { display: none; }
    &.has-flyout {
      &>a:first-child { 
        padding-#{$defaultOpposite}: $navBarHeight; 
        position: relative;
        &:after { @include cssTriangle(rem(0.4), darken($white, 10%), top); 
        position: absolute; 
        #{$defaultOpposite}: $navBarHeight / 2; 
        top: ($navBarHeight / 2) - 3; 
        }
      }
      &>a.flyout-toggle {
        position: absolute; 
        #{$defaultOpposite}: 0; 
        top: 0; 
        padding: ($navBarHeight / 2); 
        z-index: 2; 
        display: block; 
      }
      &.is-touch {
        &>a:first-child { padding-#{$defaultOpposite}: rem(5.5);}
        &>a.flyout-toggle { }
      }
    }
  }
  &>li>a:first-child { 
    position: relative; 
    padding: 0 ($navBarHeight / 2); 
    display: block; 
    text-decoration: none; 
    font-size: ms(0); 
  }
  &>li>input { margin: 0 rem(1); }
  &.vertical { 
    height: auto; 
    margin-top: 0;
    &>li { 
      float: none;
      &.has-flyout>a:first-child:after { 
        @include cssTriangle(rem(0.4), darken($white, 10%), $defaultFloat); 
      }
      .flyout { 
        #{$defaultFloat}: 100%; 
        top: rem(-0.1);
        &.right { #{$defaultFloat}: auto; #{$defaultOpposite}: 100%; }
      }
      &.active {  }
      &:last-child { }
    }
  }
}

  .flyout { 
    background: darken($white, 5%); 
    padding: $navBarHeight / 2; 
    margin: 0; 
    position: absolute; 
    top: $navBarHeight - 1; 
    #{$defaultFloat}: rem(-0.1); 
    width: $navFlyoutBaseWidth; 
    z-index: 40; 
    p {
      line-height: 1.2; 
      font-size: ms(0) - 1; 
    }
    *:first-child { margin-top: 0; } /* remove margin on any first-child element */
    *:last-child { margin-bottom: 0; } /* remove margin on last element */
    &.small { width: $navFlyoutBaseWidth / 1.5; }
    &.large { width: $navFlyoutBaseWidth * 1.75; }
    &.right { left: auto; right: rem(-0.2); }
    &.left { right: auto; left: rem(-0.2); }
    &.up { top: auto; bottom: $navBarHeight - 1; }
  }

  ul.flyout, .nav-bar li ul { padding: 0; 
    list-style: none;
    li {
      a { 
        background: darken($white, 5%); 
        color: #555; 
        display: block; 
        font-size: ms(0); 
        height: auto; 
        line-height: 1; 
        padding: (($navBarHeight / 2) - 5) ($navBarHeight / 2); 
        &:hover { background: darken($white, 8%); 
        color: #333; 
    }
      }
      &.active { 
        margin-top: 0; 
        a { 
          background: lighten($black, 30%); 
          color: #fff; 
          height: auto; 
          margin: 0; 
          position: static; 
          top: 0; 
        }
      }
    }
  }
